(this["webpackJsonpimage-gallery"]=this["webpackJsonpimage-gallery"]||[]).push([[0],{21:function(e,t,n){e.exports={Backdrop:"Modal_Backdrop__DcnBV"}},28:function(e,t,n){},29:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(20),s=n.n(o),i=(n(28),n(29),n(3)),l=n.n(i),u=n(11),d=n(7),j=n(4),p=n(5),b=n(21),f=n.n(b),g=function(e){e.show;var t=e.closeModal,n=e.imgUrl;return Object(a.jsx)(p.a.div,{initial:{opacity:0},animate:{opacity:1},className:f.a.Backdrop,onClick:t,children:Object(a.jsx)(p.a.img,{initial:{y:"-100vh"},animate:{y:"0"},onLoad:function(){return console.log("loaded")},src:n,alt:"hello darkness"})})},h=c.a.memo(g),m=n(22),O=n.n(m),v=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("sending request..."),a="https://www.reddit.com/r/".concat(t,".json?raw_json=1"),n&&(a="".concat(a,"&after=").concat(n)),e.next=6,O.a.get(a);case 6:return r=e.sent,e.abrupt("return",r.data.data);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),w=n(9),x=n.n(w),y=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)("nocontextpics"),s=Object(j.a)(o,2),i=s[0],b=(s[1],Object(r.useState)(!0)),f=Object(j.a)(b,2),g=f[0],m=f[1],O=Object(r.useState)(""),w=Object(j.a)(O,2),y=w[0],k=w[1],_=Object(r.useState)(!1),I=Object(j.a)(_,2),C=I[0],N=I[1],S=Object(r.useState)(""),G=Object(j.a)(S,2),B=G[0],E=G[1],M=Object(r.useRef)(),H=Object(r.useCallback)(Object(d.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,v(i,y);case 3:t=e.sent,k(t.after),a=A(t.children),r=[].concat(Object(u.a)(n),Object(u.a)(a)),c(r),m(!1);case 9:case"end":return e.stop()}}),e)}))),[n,y,i]),P=Object(r.useCallback)((function(e){console.log(e),M.current&&(console.log(M.current),M.current.disconnect()),console.log("last Picture ref preis new intersection"),M.current=new IntersectionObserver((function(e){console.log(e),e[0].isIntersecting&&n.length<=100&&(console.log("visible"),H())})),console.log("last Picture ref po new intersection"),e&&M.current.observe(e)}),[H,n.length]);Object(r.useEffect)((function(){console.log("loading: ",g)}),[g]);var A=function(e){return e.map((function(e){return{thumbnail:e.data.thumbnail,url:e.data.url,id:e.data.id,source:{url:e.data.preview.images[0].source.url,height:e.data.preview.images[0].source.height,width:e.data.preview.images[0].source.width},preview:e.data.preview.images[0].resolutions[2]}}))};Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,v(i);case 4:t=e.sent,k(t.after),n=A(t.children),c(n),m(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[i]);return Object(a.jsxs)(a.Fragment,{children:[C&&Object(a.jsx)(h,{show:C,closeModal:function(){return N(!1)},imgUrl:B}),n.length>0&&Object(a.jsx)("div",{className:x.a.Gallery,children:n.map((function(e,t){return Object(a.jsx)(p.a.div,{ref:n.length===t+1?P:null,layout:!0,whileHover:{opacity:1},className:x.a.ImageContainer,onClick:function(){return t=e.source.url,E(t),void N(!0);var t},children:Object(a.jsx)(p.a.img,{initial:{opacity:0},animate:{opacity:1},transition:{delay:t/100},className:x.a.Image,src:e.preview.url,alt:e.id})},e.id)}))}),g&&Object(a.jsx)("div",{children:"Loading..."})]})};var k=function(){return Object(r.useEffect)((function(){console.log("App mounted...")}),[]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"Header",children:Object(a.jsx)("h1",{className:"HeaderText",children:"No Context Pics"})}),Object(a.jsx)(y,{})]})};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={Gallery:"Gallery_Gallery__3aQ5Z",ImageContainer:"Gallery_ImageContainer__1ZzOr",Image:"Gallery_Image__d-RQF"}}},[[48,1,2]]]);
//# sourceMappingURL=main.597c3f34.chunk.js.map